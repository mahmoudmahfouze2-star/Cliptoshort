<!DOCTYPE html>
<html lang="en">
<head>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4250466001924394"
     crossorigin="anonymous"></script> 
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ClipToShort - Upload Short Generator</title>
<script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.4/dist/ffmpeg.min.js"></script>

<style>
body{
background:#0f0f14;
color:white;
font-family:Arial, sans-serif;
text-align:center;
margin:0;
padding:20px;
}

h1{
color:#7c3aed;
}

.container{
max-width:600px;
margin:auto;
}

input, select{
padding:10px;
margin:10px;
width:90%;
border-radius:6px;
border:none;
}

button{
display:inline-block;
padding:12px 25px;
margin:15px;
background:#7c3aed;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
font-size:16px;
}

button:hover{
background:#22d3ee;
}

video{
width:100%;
margin-top:20px;
border-radius:8px;
}

.ad-box{
background:#1f1f2e;
padding:25px;
margin:25px auto;
border:1px dashed #7c3aed;
}

.status{
font-weight:bold;
margin-top:10px;
}
</style>
</head>

<body>

<h1>ClipToShort</h1>
<p>Upload your video and generate a short preview</p>

<div class="ad-box">Ad Space (Top Banner)</div>

<div class="container">
<input type="file" id="videoInput" accept="video/*">
<p id="uploadStatus" class="status"></p>

<label>Start Time (seconds)</label><br>
<input type="number" id="startTime" value="0">

<label>Duration (seconds)</label><br>
<select id="duration">
<option value="15">15 Seconds</option>
<option value="30">30 Seconds</option>
<option value="60">60 Seconds</option>
</select>

<button type="button" onclick="generatePreview()">Generate Short</button>

<div class="ad-box">Ad Space (Before Processing)</div>

<video id="videoPlayer" controls></video>

</div>

<script>
const { createFFmpeg, fetchFile } = FFmpeg;
const ffmpeg = createFFmpeg({ log: true });

let input = document.getElementById("videoInput");
let statusText = document.getElementById("uploadStatus");
let video = document.getElementById("videoPlayer");

let uploadedFile;

input.addEventListener("change", function(){
    uploadedFile = input.files[0];

    if(uploadedFile){
        statusText.innerText = "Video Ready ✅";
        statusText.style.color = "#22c55e";

        video.src = URL.createObjectURL(uploadedFile);
    }
});

async function generatePreview(){

    if(!uploadedFile){
        alert("Upload a video first");
        return;
    }

    let start = document.getElementById("startTime").value;
    let duration = document.getElementById("duration").value;

    statusText.innerText = "Processing video...";
    statusText.style.color = "#facc15";

    if(!ffmpeg.isLoaded()){
        await ffmpeg.load();
    }

    ffmpeg.FS("writeFile", "input.mp4", await fetchFile(uploadedFile));

    await ffmpeg.run(
        "-ss", start,
        "-t", duration,
        "-i", "input.mp4",
        "-c", "copy",
        "output.mp4"
    );

    const data = ffmpeg.FS("readFile", "output.mp4");
    const url = URL.createObjectURL(new Blob([data.buffer], { type: "video/mp4" }));

    video.src = url;

    statusText.innerText = "Short Generated ✅";
    statusText.style.color = "#22c55e";
}
</script>

</body>
</html>



